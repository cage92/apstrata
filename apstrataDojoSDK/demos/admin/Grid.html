<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ap((strata query</title>
    <style type="text/css">
        @import "../../lib/dojo/1.3.0-src/dijit/themes/tundra/tundra.css";
        @import "../../lib/dojo/1.3.0-src/dojo/resources/dojo.css";
        @import "../../apstrata/resources/css/apstrata.css";
		
		body {font-family: sans-serif; font-size: 10pt;}
		.label {font-size: 1em; color: #454545;}
		.value {font-size: 1.5em; color: #1212AA;}
		.delete {font-size: 1em; color: grey;}
    </style>

	<link rel="shortcut icon" href="images/favicon.png" type="image/png" />
    
	<script type="text/javascript" src="../../lib/dojo/1.3.0-src/dojo/dojo.js" djConfig="parseOnLoad: true"></script>
	<script type="text/javascript" src="../../apstrata/apstrata.js" apConfig="timeout: 10000"></script>

    <script type="text/javascript">
        dojo.require("dojo.parser")
        dojo.require("dijit.layout.ContentPane")
		dojo.require("dijit.form.ComboBox")
		dojo.require("dojo.data.ItemFileReadStore")
		dojo.require("dojox.grid.DataGrid")

        var connection
		var storeNamesData
        var storeNamesStore
		var store
		
        dojo.addOnLoad(function() {
			dojo.require ("apstrata.apsdb.client.Connection")
			dojo.require ("apstrata.apsdb.client.ListStores")
			dojo.require ("apstrata.apsdb.client.ApsdbRWStore")
			
			connection = new apstrata.apsdb.client.Connection({statusWidget: "apstrata.apsdb.client.widgets.ConnectionStatus"})

	        var layout4 = [
	            { field: 'title', name: 'Title', width: '200px' },
	            { field: 'atRoot', name: '@Root', width: '200px' },
	            { field: 'contents', name: 'Contents', width: '200px' },
	            { field: 'tags', name: 'Tags', width: '200px' }
	        ];
						
			var queryParams = {storeName: "wiki", columns: "title,atRoot,contents,tags"}
			
			store = new apstrata.apsdb.client.ApsdbRWStore(connection, queryParams)
			var request = {
				query: "atRoot=\"true\"",
				onComplete: function() {
					console.dir(store)

			        // create a new grid:
			        var grid4 = new dojox.grid.DataGrid({
			            query: "atRoot=\"true\"",
			            store: store,
			            clientSort: true,
			            rowSelector: '20px',
			            structure: layout4
			        }, document.createElement('div'));
			
			        // append the new grid to the div "gridContainer4":
			        dojo.byId("gridContainer4").appendChild(grid4.domNode);
			
			        // Call startup, in order to render the grid:
			        grid4.startup();
				}
			}
			
			store.fetch(request)
		})

	</script>
</head>
<body class="tundra">
<br>
<div id="gridContainer4" style="width: 400px; height: 200px;"></div>		
</body>
</html>