		

	<div>
		<style>
			#dvCode, #dvSnippet {
				font-family: courier;
				padding: 30px;
			}
			
		</style>
		<br /><br /><br />
		<table width="100%">
			<tr>
				<td>
					<img width="60" src='../../apstrata/resources/images/pencil-icons/left.png' onclick='f1()'>
				</td>
				<td>
		<div id='dvCode' >
		<b>// Save results</b><br/>
		var saveResult  = <b>client.call</b>({<br/>
		&nbsp;&nbsp;&nbsp;			<b>action: "SaveDocument"</b>,<br/>
		&nbsp;&nbsp;&nbsp;			<b>request: this.surveyform.getValues()</b>,<br/>
		&nbsp;&nbsp;&nbsp;			load: function(operation) { /* Check for success */ }<br/>
		<p/>			
		<b>// Query to get the total number of surveys taken</b><br/>
		var queryResult  = <b>client.call</b>({<br/>
		&nbsp;&nbsp;&nbsp;			<b>action: "Query"</b>,  <br/>
		&nbsp;&nbsp;&nbsp;			request: apsdb: { query: "apsdb.schema=\"" + charting.apsdbSchema + "\"",count: true } }	<br/>
		&nbsp;&nbsp;&nbsp;			 load: function(operation) { /* work with results */ }<br/>
		<p/>
		
		</div>
		<div id='dvSnippet' style="visibility:hidden;display: none;">
<b>//query for creator of the survey</b><br/>
var queryResult = <b>apsdb.callApi("Query"</b>, { "apsdb.queryFields" : "apsdb.creator",  "apsdb.store" : store,  "apsdb.query" : 'apsdb.documentKey = "' + docKey + '"' } , null);<br/>
<br/>
<b>//get the creator of the survey in order to get his twitter account</b><br/>
var getUserResult = <b>apsdb.callApi("GetUser"</b>, { "login" : queryResult.result.documents[0]["apsdb.creator"] }, null);<br/>
<br/>
<b>//send message to the survey owner that someone filled the survey</b><br/>
httpResp = <b>apsdb.callHttp("http://twitter.com/direct_messages/new.json"</b>, "POST", { text : title, user : twitterUserName }, ["apstratatest","changeme"], null, null, false, null, false, false);<br/>
		</div>
				</td>
				<td>
					<img width="60" src='../../apstrata/resources/images/pencil-icons/right.png' onclick='f2()'>					
				</td>
			</tr>
		</table>
		
	</div>
		<script>
				function f1() {
					dojo.style(dojo.byId('dvSnippet'), {visibility: 'hidden'})
					dojo.style(dojo.byId('dvSnippet'), {display: 'none'})
					dojo.style(dojo.byId('dvCode'), {visibility: 'visible'})
					dojo.style(dojo.byId('dvCode'), {display: ''})
				}
				
				function f2() {
					dojo.style(dojo.byId('dvSnippet'), {visibility: 'visible'})
					dojo.style(dojo.byId('dvSnippet'), {display: ''})
					dojo.style(dojo.byId('dvCode'), {visibility: 'hidden'})
					dojo.style(dojo.byId('dvCode'), {display: 'none'})
				}
				
				//function onLoadDocumentation() {
				//	console.debug('hi')
				//}
				
		</script>
